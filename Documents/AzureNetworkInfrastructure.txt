KobraLocksAzureInfrastructure/
│
├── Networking/
│   ├── VirtualNetworks/
│   │   ├── KobraLocksMainVnet/
│   │   │   ├── Address Space: "10.0.0.0/16"
│   │   │   ├── DNS Servers: Azure-provided
│   │   │   ├── Subnets/
│   │   │   │   ├── AppServiceSubnet/
│   │   │   │   │   ├── Range: "10.0.0.0/24"
│   │   │   │   │   ├── ServiceEndpoints/
│   │   │   │   │   │   └── Microsoft.Sql
│   │   │   │   │   ├── Network Security Group: AppServicesNSG
│   │   │   │   │   └── VNet Integration: Enabled for KobraLocksBackend and KobraLocksFrontend
│   │   │   │   ├── DatabaseSubnet/
│   │   │   │   │   ├── Range: "10.0.1.0/24"
│   │   │   │   │   ├── ServiceEndpoints/
│   │   │   │   │   │   └── Microsoft.Sql
│   │   │   │   │   └── Network Security Group: DatabaseNSG
│   │   │   │   └── AksSubnet/
│   │   │   │       ├── Range: "10.0.2.0/24"
│   │   │   │       └── ServiceEndpoints: Not required
│   │   │   ├── Peering/
│   │   │   │   └── PeeringWithKobraLocksDRVnet/
│   │   │   │       ├── Name: "MainToDRPeering"
│   │   │   │       └── Settings: [AllowVirtualNetworkAccess: true, AllowForwardedTraffic: true, AllowGatewayTransit: false, UseRemoteGateways: false]
│   │   │   ├── DDoS Protection: Standard (Optional)
│   │   │   ├── Firewall: Configured (Optional)
│   │   │   └── Microsoft Defender for Cloud: Enabled
│   │   │   └── Private Endpoints: Configured for databases and storage accounts
│   │   │   └── Locks: Applied to critical resources
│   │   └── KobraLocksDRVnet/
│   │       ├── Address Space: "10.1.0.0/16"
│   │       ├── Subnets: Configured as needed for disaster recovery
│   │       └── Peering/
│   │           └── PeeringWithKobraLocksMainVnet/
│   │               ├── Name: "DRToMainPeering"
│   │               └── Settings: [AllowVirtualNetworkAccess: true, AllowForwardedTraffic: true, AllowGatewayTransit: false, UseRemoteGateways: false]
│   ├── PrivateDNSZones/
│   │   ├── postgresql.database.azure.com/
│   │   │   └── RecordSets/
│   │   │       ├── dev-postgre-east-us
│   │   │       └── Link: Linked to KobraLocksMainVnet and KobraLocksDRVnet
│   │   └── privatelink.blob.core.windows.net/
│   │       └── RecordSets/
│   │           └── blobstorage
│   │           └── Link: Linked to KobraLocksMainVnet
│   └── NetworkSecurityGroups/
│       ├── AppServicesNSG/
│       │   └── Rules/
│       │       ├── AllowHTTPS
│       │       └── DenyAllOutbound
│       └── DatabaseNSG/
│           └── Rules/
│               ├── AllowVnetInbound
│               └── DenyAllOutbound
│
├── AppServices/
│   ├── KobraLocksBackend/
│   │   ├── Networking/
│   │   │   └── VNet Integration/
│   │   │       └── Subnet: "AppServiceSubnet"
│   │   └── Microsoft Defender for Cloud: Enabled
│   └── KobraLocksFrontend/
│       ├── Networking/
│       │   └── VNet Integration/
│       │       └── Subnet: "AppServiceSubnet"
│       └── Microsoft Defender for Cloud: Enabled
│
└── Databases/
    ├── PostgreSQL/
    │   ├── Server/
    │   │   └── Networking/
    │   │       ├── VNet Integration/
    │   │       │   └── Subnet: "DatabaseSubnet"
    │   │       ├── Private Endpoint/
    │   │       │   └── PrivateDNSZone: "postgresql.database.azure.com"
    │   │       └── Microsoft Defender for Cloud: Enabled
    │   └── PrivateDNSZoneLink/
    │       └── LinkTo: "postgresql.database.azure.com"
    └── CosmosDB/
        └── Networking/
            ├── VirtualNetworkServiceEndpoints/
            │   └── EnabledFor: "KobraLocksMainVnet"
            └── Microsoft Defender for Cloud: Enabled

